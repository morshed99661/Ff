<b:section id='main' class='main' maxwidgets='1' showaddelement='yes'>
  <b:widget id='MiniApp1' type='HTML' visible='true'>
    <b:widget-settings>
      <b:widget-setting name='content'>
        <![CDATA[

<!-- ============================ -->
<!-- Story App + Telegram Mini App -->
<!-- ============================ -->

<div id="miniapp">

  <!-- Header -->
  <header>ЁЯУЦ ржЖржорж╛рж░ ржЧрж▓рзНржкрзЗрж░ ржЕрзНржпрж╛ржк</header>

  <!-- Story List -->
  <div class="story-list" id="storyList">
    <div class="story-item" onclick="openStory('story1')">
      <img src="https://i.postimg.cc/Hn80Td6S/images.jpg" alt="ржЧрж▓рзНржк рзз" class="story-thumb">
      <span>ржЧрж▓рзНржк рзз: ржнржпрж╝рж╛ржиржХ рж╕рзЗржЗ рж░рж╛ржд</span>
    </div>
    <div class="story-item" onclick="openStory('story2')">
      <img src="https://i.postimg.cc/Hn80Td6S/images.jpg" alt="ржЧрж▓рзНржк рзи" class="story-thumb">
      <span>ржЧрж▓рзНржк рзи: рж╕рждрзНржпрзЗрж░ ржЬрзЯ</span>
    </div>
    <div class="story-item" onclick="openStory('story3')">
      <img src="https://i.postimg.cc/Hn80Td6S/images.jpg" alt="ржЧрж▓рзНржк рзй" class="story-thumb">
      <span>ржЧрж▓рзНржк рзй: рж╕рзЛржирж╛рж░ рж╣рж╛ржБрж╕</span>
    </div>
  </div>

  <!-- Story Pages -->
  <div class="story-page" id="story1">
    <div class="back-btn" onclick="goBack()">тмЕ ржлрж┐рж░рзЗ ржпрж╛ржи</div>
    <h2>ржЧрж▓рзНржк рзз: ржнржпрж╝рж╛ржиржХ рж╕рзЗржЗ рж░рж╛ржд</h2>
    <p>ржЕржмрж┐ржирж╛рж╢ ржпржЦржи ржжржоржжржо ржмрж┐ржорж╛ржиржмржирзНржжрж░рзЗ ржирж╛ржорзЗ рждржЦржи рж░рж╛ржд рж╣рзЯрзЗ ржЧрзЗржЫрзЗ... [ржЖржкржирж╛рж░ ржкрзБрж░рзЛ ржЧрж▓рзНржк ржПржЦрж╛ржирзЗ ржерж╛ржХржмрзЗ]</p>
  </div>

  <div class="story-page" id="story2">
    <div class="back-btn" onclick="goBack()">тмЕ ржлрж┐рж░рзЗ ржпрж╛ржи</div>
    <h2>ржЧрж▓рзНржк рзи: рж╕рждрзНржпрзЗрж░ ржЬрзЯ</h2>
    <p>ржорж┐ржерзНржпрж╛ ржпрждржЗ ржЫрзЬрж╛ржХ ржирж╛ ржХрзЗржи, рж╢рзЗрж╖рзЗ рж╕рждрзНржпрзЗрж░ ржЬрзЯ рж╣рзЯред ржПржХржжрж┐ржи ржЧрзНрж░рж╛ржорзЗрж░ ржПржХ рж▓рзЛржХ...</p>
  </div>

  <div class="story-page" id="story3">
    <div class="back-btn" onclick="goBack()">тмЕ ржлрж┐рж░рзЗ ржпрж╛ржи</div>
    <h2>ржЧрж▓рзНржк рзй: рж╕рзЛржирж╛рж░ рж╣рж╛ржБрж╕</h2>
    <p>ржПржХ ржХрзГрж╖ржХ ржкрзНрж░рждрж┐ржжрж┐ржи ржПржХржЯрж┐ рж╕рзЛржирж╛рж░ ржбрж┐ржо ржкрж╛ржУрзЯрж╛ рж╢рзБрж░рзБ ржХрж░рж▓ред ржХрж┐ржирзНрждрзБ рж▓рзЛржнрзЗ ржкрзЬрзЗ...</p>
  </div>

  <!-- Telegram Mini App -->
  <h2>ЁЯЪА Telegram Mini App</h2>
  <p id="user">Loading...</p>
  <button onclick="sendData()">Send Data</button>

</div>

<style>
  body {
    font-family: kalpurush, sans-serif;
    margin: 0;
    padding: 0;
    background: #f7f7f7;
  }
  header {
    background: #4a148c;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 20px;
    position: sticky;
    top: 0;
  }
  .story-list {
    padding: 15px;
    max-height: calc(100vh - 60px);
    overflow-y: auto;
  }
  .story-item {
    display: flex;
    align-items: center;
    background: white;
    margin: 10px 0;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    cursor: pointer;
    transition: 0.3s;
  }
  .story-item:hover { background: #ede7f6; }
  .story-thumb { width: 60px; height: 60px; object-fit: cover; border-radius: 10px; margin-right: 15px; }
  .story-page { display: none; padding: 20px; }
  .back-btn {
    display: inline-block; margin-bottom: 15px; padding: 8px 12px;
    background: #4a148c; color: white; border-radius: 5px; cursor: pointer;
  }
  h2 { font-size: 18px; }
  p { font-size: 16px; line-height: 1.5; }
</style>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  // Story App JS
  function openStory(storyId) {
    document.getElementById("storyList").style.display = "none";
    document.querySelectorAll(".story-page").forEach(s => s.style.display = "none");
    document.getElementById(storyId).style.display = "block";
  }
  function goBack() {
    document.getElementById("storyList").style.display = "block";
    document.querySelectorAll(".story-page").forEach(s => s.style.display = "none");
  }

  // Telegram Mini App JS
  let tg = window.Telegram.WebApp;
  tg.expand();

  if(tg.initDataUnsafe.user) {
    document.getElementById("user").innerText = "Hello, " + tg.initDataUnsafe.user.first_name;
  } else {
    document.getElementById("user").innerText = "Open inside Telegram";
  }

  function sendData() {
    tg.sendData("тЬЕ User clicked the button!");
  }
</script>

        ]]>
      </b:widget-setting>
    </b:widget-settings>
  </b:widget>
</b:section>